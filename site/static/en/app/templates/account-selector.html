<div>
  <div data-selector data-item-type="Account"
    data-items="accounts" data-selected="selected"
    data-invalid="invalid"
    data-add-item="showAddAccountModal=true"
    data-fixed="{{fixed}}">
    <div data-spinner="services.account.loading"
      data-spinner-class="selector-spinner"></div>
    <div data-ng-hide="services.account.loading" class="account">
      <table class="table table-condensed">
        <thead>
          <tr>
            <th colspan="2">
              <span title="{{selected.id}}">{{selected.label}}</span>
              <a data-ng-show="selecting" data-ng-click="model.showEditAccount=true"
                data-tooltip-title="Edit"
                data-placement="bottom" data-trigger="hover">
                <i class="icon-pencil"></i>
              </a>
            </th>
            <th>
              <span></span>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="compact">Balance</td>
            <td>
              <span data-account-balance="selected"></span>
            </td>
          </tr>
        </tbody>
      </table>
      <div data-ng-show="showDepositButton">
        <button class="btn btn-success"
          data-ng-click="showDepositModal=true"><i class="icon-plus icon-white"></i> Deposit</button><br/>
        <div data-modal-deposit="showDepositModal"
          data-account="selected" data-instant="instant"></div>
      </div>
      <div data-ng-show="balanceTooLow">
        <hr />
        <div class="alert alert-error">You must select an account with a balance or remaining credit of at least <span
        class="currency">{{selected.currency}}</span> {{minBalance | ceil | currency:'$'}}.</div>
      </div>
      <div data-ng-show="allowInstantTransfer && instantTransferRequired">
        <hr />
        <div class="alert alert-warning">
          An instant transfer will be performed to complete this purchase because the selected account does not have sufficient funds.
          <span data-ng-show="backupSource">
            <a data-ng-click="model.paymentMethodIsCollapsed=!model.paymentMethodIsCollapsed">
              <i class="icon-credit-card"></i>
            </a>
          </span>
        </div>
        <div data-collapse="model.paymentMethodIsCollapsed">
          <h5>Instant Transfer Payment Method</h5>
          <div data-payment-token-selector data-selected="model.backupSource" data-instant="true" fixed="true"></div>
        </div>
      </div>
    </div>
  </div>
  <div data-modal-add-account="showAddAccountModal"
    data-identity-id="{{identityId}}"
    data-modal-on-close="!err && (selected=result)"></div>
  <div data-modal-edit-account="model.showEditAccount" data-account="selected"></div>
</div>
