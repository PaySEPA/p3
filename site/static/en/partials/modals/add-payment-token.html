<div class="modal">
  <div class="modal-header">
    <a class="close btn-close">&times;</a>
    <h3>New Payment Method</h3>
  </div>
  <div class="modal-body">
    <div data-ng-include="'/partials/demo-warning.html'"></div>
    
    <div class="section" data-ng-show="paymentMethod == 'bank:BankAccount'">
      <h4 class="headline">Bank Account Agreement</h4>
      <div class="well">
        <p>By adding a new bank account, you agree that you are its rightful
        owner and that you permit us to transfer funds both to and from it. You
        also acknowledge that you will be charged bank fees whenever you request
        that we transfer money to or from this bank account. We do not control
        these fees; they are charged by the financial system and passed on to
        you.</p>
        <p>In order to verify that you have access to the bank account we will
        deposit two separate small amounts of money into it. These amounts will
        show up in your bank account in 3-5 business days, after which you must
        submit them to this website to verify your bank account.</p>
        <p><strong>Your bank account cannot be used to transfer
        funds until the verification process is complete. Upon completion of
        the verification process, the funds we deposited into your account will
        be recuperated and you will be charged a bank fee.</strong></p>
        <p>
        You may elect to include an initial deposit at the time of verification
        to avoid an additional bank fee.
        </p>
        <hr/>
        <form class="form-vertical" action="">
          <fieldset>
            <label class="checkbox">
              <input type="checkbox" data-ng-model="agreementChecked"> I agree to the above terms and conditions.
            </label>
          </fieldset>
        </form>
      </div>
    </div>

    <div class="section">
    <h4 class="headline">Select Payment Method Name</h4>
      <form class="well form-horizontal" action="">
        <fieldset>
          <div class="control-group" data-binding="label">
            <label class="control-label" for="name">Name</label>
            <div class="controls">
              <input type="text" name="label"
                data-tooltip-title="Enter a memorable name that describes this method of payment. It will be displayed to you later."
                data-placement="right" data-trigger="focus"
                data-ng-model="label" />
              <p class="help-block">Suggestions: My Visa, Checking Account</p>
            </div>
          </div>
        </fieldset>
      </form>
    </div>

    <div class="section">
      <h4 class="headline">Enter Payment Details</h4>
      <form class="well form-horizontal" action="">
        <fieldset>
          <div class="control-group" data-ng-show="multiEnabled">
            <div class="controls">
              <label class="radio inline" data-ng-show="creditCardEnabled">
                <input type="radio" name="payment-type" value="ccard:CreditCard"
                  checked="checked" data-ng-model="paymentMethod" />
                Credit Card
              </label>
              <label class="radio inline" data-ng-show="bankAccountEnabled">
                <input type="radio" name="payment-type" value="bank:BankAccount"
                  data-ng-model="paymentMethod" />
                Bank Account
              </label>
            </div>
          </div>
          <div name="payment-type-fields" data-ng-switch="paymentMethod">
            <div data-ng-switch-when="ccard:CreditCard">
              <div class="control-group" data-binding="source.cardBrand">
                <label class="control-label" for="card-brand">Type</label>
                <div class="controls">
                  <span name="card-brand"
                    data-credit-card-selector="card.cardNumber"
                    data-credit-card-brand="card.cardBrand"></span>
                </div>
              </div>
              <div class="control-group" data-binding="source.cardNumber">
                <label class="control-label" for="card-number">Card Number</label>
                <div class="controls">
                  <input class="input-large" type="text" name="card-number" maxlength="16"
                    data-tooltip-title="You must enter your credit card number, which must be 16 digits long."
                    data-placement="right" data-trigger="focus"
                    data-ng-model="card.cardNumber" />
                </div>
              </div>
              <div></div>
              <div class="control-group" data-binding="source.cardExpMonth">
                <label class="control-label" for="card-exp-month">Expiration Month</label>
                <div class="controls">
                  <select class="input-large" name="card-exp-month"
                    data-ng-model="card.cardExpMonth"
                    data-ng-options="month.index as month.label for month in monthLabels">
                    <option value=""></option>
                  </select>
                </div>
              </div>
              <div class="control-group" data-binding="source.cardExpYear">
                <label class="control-label" for="card-exp-year">Expiration Year</label>
                <div class="controls">
                  <select class="input-small" name="card-exp-year"
                    data-ng-model="card.cardExpYear"
                    data-ng-options="year for year in years">
                    <option value=""></option>
                  </select>
                </div>
              </div>
              <div></div>
              <div class="control-group" data-binding="source.cardCvm">
                <label class="control-label" for="card-cvm">Security Code</label>
                <div class="controls">
                  <div class="input-prepend">
                    <span class="add-on"><img src="/img/scode.png" /></span><input
                      class="input-small" type="text" name="card-cvm" maxlength="4"
                      data-tooltip-title="You must enter the security code on the back of your credit card. It will be 3 or 4 digits long."
                      data-placement="right" data-trigger="focus"
                      data-ng-model="card.cardCvm" />
                  </div>
                </div>
              </div>
            </div>
            <div data-ng-switch-when="bank:BankAccount">
              <div class="control-group" data-binding="source.bankRoutingNumber">
                <label class="control-label" for="bank-routing-number">Routing Number</label>
                <div class="controls">
                  <input type="text" name="bank-routing-number"
                    data-tooltip-title="You must enter your bank's routing number. This can be found in your checkbook or by signing into your bank online."
                    data-placement="right" data-trigger="focus"
                    data-ng-model="bankAccount.bankRoutingNumber"
                    maxlength="9" />
                </div>
              </div>
              <div class="control-group" data-binding="source.bankAccountType">
                <label class="control-label" for="bank-account-type">Account Type</label>
                <div class="controls">
                  <select class="input-medium" name="bank-account-type"
                    data-tooltip-title="If your bank account does not have a type, choose 'Checking'."
                    data-placement="right" data-trigger="focus"
                    data-ng-model="bankAccount.bankAccountType"
                    data-ng-options="type.id as type.label for type in bankAccountTypes">
                  </select>
                </div>
              </div>
              <div class="control-group" data-binding="source.bankAccount">
                <label class="control-label" for="bank-account">Account Number</label>
                <div class="controls">
                  <input type="text" name="bank-account"
                    data-tooltip-title="You must enter your bank account number. This can be found in your checkbook or by signing into your bank online."
                    data-placement="right" data-trigger="focus"
                    data-ng-model="bankAccount.bankAccount"
                    maxlength="30" />
                </div>
              </div>
            </div>
          </div>
        </fieldset>
      </form>
    </div>

    <div class="section" data-ng-show="billingAddressRequired">
      <h4 class="headline">Select Billing Address</h4>
      <div data-address-selector data-selected="selection.address"
        data-invalid="selection.invalidAddress"></div>
    </div>
  </div>
  <div class="modal-footer">
    <div class="modal-feedback"
      data-feedback="feedback" data-target="feedbackTarget"></div>
    <span data-spinner="loading"
      data-spinner-class="prepend-btn-spinner"></span>
    <button class="btn btn-primary"
      data-ng-disabled="loading ||
        (paymentMethod == 'bank:BankAccount' && !agreementChecked) ||
        (billingAddressRequired && selection.address == null)"
      data-ng-click="add()"><i class="icon-ok icon-white"></i> Add</button>
    <button class="btn btn-close" data-ng-disabled="loading">Cancel</button>
  </div>
</div>
