<div>
  <div data-selector data-item-type="Payment Method"
    data-items="paymentTokens" data-selected="selected" data-invalid="invalid"
    data-add-item="showAddPaymentTokenModal=true" data-fixed="{{fixed}}"
    data-custom-display="true" data-columns="2" data-selecting="selecting">
    <ul ng-show="services.token.loading" class="unstyled item">
      <li class="item-hover well">
        <div data-spinner="services.token.loading"
          data-spinner-class="selector-spinner"></div>
      </li>
    </ul>
    <div ng-hide="services.token.loading || selecting">
      <div ng-include="'/app/components/payment-token/payment-token-display.html'"></div>
    </div>
    <div ng-show="!services.token.loading && selecting" class="container-fluid">
      <div ng-repeat="row in grid">
        <div class="row-fluid">
          <div class="span6" ng-repeat="selected in row">
            <div ng-include="'/app/components/payment-token/payment-token-display.html'"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div ng-show="selected.showExpirationWarning" class="alert alert-warning">
    <strong>Warning!</strong> This payment method will expire in less than a month.
  </div>
  <div ng-show="selected.showExpired" class="alert alert-error">
    <strong>Error!</strong> This payment method has expired.
  </div>
  <stackable-modal stackable="showAddPaymentTokenModal"
    stackable-closed="!err && (selected=result)">
    <div data-add-payment-token-modal data-payment-methods="paymentMethods"></div>
  </stackable-modal>
</div>
