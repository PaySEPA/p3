<form class="well form-horizontal" action="">
  <fieldset>
    <div class="control-group" data-binding="title">
      <label class="control-label" for="title">Title</label>
      <div class="controls">
        <div class="input-prepend input-append">
          <span class="add-on"><i class="icon-tag"></i></span><input
            type="text" name="title"
            data-ng-model="model.asset.title"
            data-track-state="model.help.title"
            placeholder="Title" />
          <button class="btn" data-help-toggle="model.help.title">
            <i class="icon-question-sign"></i>
          </button>
        </div>
        <p ng-show="model.help.title.show" class="help-block br-fadein br-fadeout">
          Please enter the title for the invoice.
          <!--
          <br/><br/>
          Suggestions: ...
          -->
        </p>
      </div>
    </div>
  </fieldset>
</form>

<div class="section">
  <h4 class="headline">Items</h4>

  <button data-ng-show="!(model.search.state.loading || state.assets.loading || state.listings.loading)"
    class="btn btn-success btn-add"
    data-ng-click="model.modals.showAddInvoiceItem=true"><i class="icon-plus"></i> Add Item</button>

  <table class="table table-condensed"
    data-ng-show="!state.assets.loading && model.asset.invoiceItem.length > 0">
    <thead>
      <tr>
        <th class="name">Title</th>
        <th class="money compact">Amount</th>
        <th class="action">Action</th>
      </tr>
    </thead>
    <tbody>
      <tr data-ng-repeat="item in model.asset.invoiceItem" class="asset"
        data-fadein="asset.added" data-fadeout="asset.deleted">
        <!-- Description -->
        <td>
          <span class="name">{{item.title}}</span>
          <div data-ng-show="item.comment">
            <p class="muted">{{item.comment}}</p>
          </div>
        </td>
        <!-- Amount -->
        <td class="money compact">
          <span class="money"><span class="currency">{{item.currency}}</span> {{item.amount | currency:'$'}}</span>
        </td>
        <!-- Action -->
        <td class="action">
          <action-menu>
            <ul class="dropdown-menu stackable-menu">
              <li>
                <a class="stackable-cancel" data-ng-click="model.modals.item=item; model.modals.showEditInvoiceItem=true">
                  <i class="icon-pencil"></i> Edit
                </a>
              </li>
              <li data-ng-show="!$first">
                <a class="stackable-cancel" data-ng-click="">
                  <i class="icon-chevron-up"></i> Move Up
                </a>
              </li>
              <li data-ng-show="!$last">
                <a class="stackable-cancel" data-ng-click="">
                  <i class="icon-chevron-down"></i> Move Down
                </a>
              </li>
              <li class="divider"></li>
              <li class="btn-danger">
                <a class="stackable-cancel" data-ng-click="deleteInvoiceItem(item)">
                  <i class="icon-remove"></i> Delete
                </a>
              </li>
            </ul>
          </action-menu>
        </td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td></td>
        <th class="money">Total</th>
        <td></td>
      </tr>
      <tr>
        <td>
          Invoice total.
        </td>
        <td class="money">
          <span class="money"><span class="currency">{{model.destination.currency}}</span> <strong>{{0 | currency:'$'}}</strong></span>
        </td>
        <td></td>
      </tr>
      <tr data-ng-show="state.assets.loading">
        <td colspan="3" style="text-align: center">
          <span class="center">
            <span data-spinner="state.assets.loading" data-spinner-class="table-spinner"></span>
          </span>
        </td>
      </tr>
    </tfoot>
  </table>
  <div data-ng-show="!state.assets.loading && model.asset.invoiceItem.length == 0">
    <p class="center">No items.</p>
  </div>

  <stackable-modal stackable="model.modals.showAddInvoiceItem">
    <div data-add-invoice-item-modal data-asset="model.asset" data-destination="model.destination"></div>
  </stackable-modal>
</div>

<div class="section">
  <h4 class="headline">Select Destination Account</h4>
  <div data-account-selector data-selected="model.destination"
    data-invalid="selection.invalidAccount"
    data-instant-transfer-deposit="ignore"></div>
</div>
